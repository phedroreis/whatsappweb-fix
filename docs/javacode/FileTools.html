<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/javacode.css"/>
</head>
<body>

<div class="javacode" style="width:648px;">

<div class="linenumber">
00</br>01</br>02</br>03</br>04</br>05</br>06</br>07</br>08</br>09</br>10</br>11</br>12</br>13</br>14</br>15</br>16</br>17</br>18</br>19</br>20</br>21</br>22</br>23</br>24</br>25</br>26</br>27</br>28</br>29</br>30</br>31</br>32</br>33</br>34</br>35</br>36</br>37</br>38</br>39</br>40</br>41</br>42</br>43</br>44</br>45</br>46</br>47</br>48</br>49</br>50</br>51</br>52</br>53</br>54</br>55</br>56</br>57</br>58</br>59</br>60</br>61</br>62</br>63</br>64</br>65</br>66</br>67</br>68</br>69</br>70</br>71</br>72</br>73</br>74</br>75</br>76</br>77</br>78</br>79</br>80</br>81</br>82</br>83</br>
</div>
<pre><code><span class="xw52fz_reserved">package</span> br.com.hkp.whatsappwebfix.util;

<span class="xw52fz_reserved">import</span> java.io.<span class="xw52fz_classname">File</span>;
<span class="xw52fz_reserved">import</span> java.io.<span class="xw52fz_classname">FileOutputStream</span>;
<span class="xw52fz_reserved">import</span> java.io.<span class="xw52fz_classname">FileWriter</span>;
<span class="xw52fz_reserved">import</span> java.io.<span class="xw52fz_classname">IOException</span>;
<span class="xw52fz_reserved">import</span> java.net.<span class="xw52fz_constant">URL</span>;
<span class="xw52fz_reserved">import</span> java.nio.channels.<span class="xw52fz_classname">Channels</span>;
<span class="xw52fz_reserved">import</span> java.nio.channels.<span class="xw52fz_classname">ReadableByteChannel</span>;
<span class="xw52fz_reserved">import</span> java.nio.charset.<span class="xw52fz_classname">StandardCharsets</span>;
<span class="xw52fz_reserved">import</span> java.nio.file.<span class="xw52fz_classname">Files</span>;

<span class="xw52fz_comment">/******************************************************************************
 * A classe fornece metodos utilitarios para ler ou gravar arquivos.
 * 
 * @since 27 de novembro de 2020 v1.0
 * @version 1.0
 * @author "Pedro Reis"
 *****************************************************************************/</span>
<span class="xw52fz_reserved">public</span> <span class="xw52fz_reserved">final</span> <span class="xw52fz_reserved">class</span> <span class="xw52fz_classname">FileTools</span>
{
    <span class="xw52fz_comment">/*[01]---------------------------------------------------------------------
    
    -------------------------------------------------------------------------*/</span>
    <span class="xw52fz_reserved">public</span> <span class="xw52fz_reserved">static</span> <span class="xw52fz_classname">String</span> <span class="xw52fz_method">readTextFile</span>(<span class="xw52fz_reserved">final</span> <span class="xw52fz_classname">File</span> file) <span class="xw52fz_reserved">throws</span> <span class="xw52fz_classname">IOException</span>
    {
        <span class="xw52fz_reserved">return</span> 
            <span class="xw52fz_reserved">new</span> <span class="xw52fz_classname">String</span>(<span class="xw52fz_classname">Files</span>.<span class="xw52fz_method">readAllBytes</span>(file.<span class="xw52fz_method">toPath</span>()), <span class="xw52fz_classname">StandardCharsets</span>.<span class="xw52fz_constant">UTF_8</span>);
       
    }<span class="xw52fz_comment">//readTextFile()</span>
    
    <span class="xw52fz_comment">/*[02]---------------------------------------------------------------------
    
    -------------------------------------------------------------------------*/</span>
    <span class="xw52fz_reserved">public</span> <span class="xw52fz_reserved">static</span> <span class="xw52fz_classname">String</span> <span class="xw52fz_method">readTextFile</span>(<span class="xw52fz_reserved">final</span> <span class="xw52fz_classname">String</span> filename) <span class="xw52fz_reserved">throws</span> <span class="xw52fz_classname">IOException</span>
    {
        <span class="xw52fz_reserved">return</span> <span class="xw52fz_method">readTextFile</span>(<span class="xw52fz_reserved">new</span> <span class="xw52fz_classname">File</span>(filename));
    }<span class="xw52fz_comment">//readTextFile()</span>
    
    <span class="xw52fz_comment">/*[03]---------------------------------------------------------------------
    
    -------------------------------------------------------------------------*/</span>
    <span class="xw52fz_reserved">public</span> <span class="xw52fz_reserved">static</span> <span class="xw52fz_reserved">void</span> <span class="xw52fz_method">writeTextFile</span>(<span class="xw52fz_reserved">final</span> <span class="xw52fz_classname">File</span> file, <span class="xw52fz_reserved">final</span> <span class="xw52fz_classname">String</span> content)
        <span class="xw52fz_reserved">throws</span> <span class="xw52fz_classname">IOException</span>
    {
        <span class="xw52fz_classname">FileWriter</span>  fw = <span class="xw52fz_reserved">new</span> <span class="xw52fz_classname">FileWriter</span>(file, <span class="xw52fz_classname">StandardCharsets</span>.<span class="xw52fz_constant">UTF_8</span>);
               
        fw.<span class="xw52fz_method">write</span>(content);
        
        fw.<span class="xw52fz_method">close</span>();
  
    }<span class="xw52fz_comment">//writeTextFile()</span>
    
    <span class="xw52fz_comment">/*[04]---------------------------------------------------------------------
    
    -------------------------------------------------------------------------*/</span>
    <span class="xw52fz_reserved">public</span> <span class="xw52fz_reserved">static</span> <span class="xw52fz_reserved">void</span> <span class="xw52fz_method">writeTextFile</span>(<span class="xw52fz_reserved">final</span> <span class="xw52fz_classname">String</span> filename, <span class="xw52fz_reserved">final</span> <span class="xw52fz_classname">String</span> content)
        <span class="xw52fz_reserved">throws</span> <span class="xw52fz_classname">IOException</span>
    {
        <span class="xw52fz_method">writeTextFile</span>(<span class="xw52fz_reserved">new</span> <span class="xw52fz_classname">File</span>(filename), content);
    }<span class="xw52fz_comment">//writeTextFile()</span>
     
    <span class="xw52fz_comment">/*[05]---------------------------------------------------------------------
    
    -------------------------------------------------------------------------*/</span>
    <span class="xw52fz_reserved">public</span> <span class="xw52fz_reserved">static</span> <span class="xw52fz_reserved">void</span> <span class="xw52fz_method">downloadUrl</span>(<span class="xw52fz_reserved">final</span> <span class="xw52fz_classname">String</span> url, <span class="xw52fz_reserved">final</span> <span class="xw52fz_classname">String</span> path)
        <span class="xw52fz_reserved">throws</span> <span class="xw52fz_classname">IOException</span>
    {
        <span class="xw52fz_classname">String</span> filename = url.<span class="xw52fz_method">substring</span>(url.<span class="xw52fz_method">lastIndexOf</span>(<span class="xw52fz_literalchar">'/'</span>), url.<span class="xw52fz_method">length</span>());
         
        <span class="xw52fz_constant">URL</span> download = <span class="xw52fz_reserved">new</span> <span class="xw52fz_constant">URL</span>(url);

        <span class="xw52fz_classname">ReadableByteChannel</span> rbc = <span class="xw52fz_classname">Channels</span>.<span class="xw52fz_method">newChannel</span>(download.<span class="xw52fz_method">openStream</span>());
        
        <span class="xw52fz_classname">FileOutputStream</span> fos = <span class="xw52fz_reserved">new</span> <span class="xw52fz_classname">FileOutputStream</span>(path + filename);
        
        fos.<span class="xw52fz_method">getChannel</span>().<span class="xw52fz_method">transferFrom</span>(rbc, 0, <span class="xw52fz_classname">Long</span>.<span class="xw52fz_constant">MAX_VALUE</span>);
        
        fos.<span class="xw52fz_method">close</span>();
        
    }<span class="xw52fz_comment">//downloadUrl()</span>
    
}<span class="xw52fz_comment">//classe FileTools</span>

</code></pre>
</div>
</body>
</html>